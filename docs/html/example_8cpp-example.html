<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>eve Data Interface: example.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">eve Data Interface
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">example.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>This is an example of how to use the EveH5 classes.</p>
<p>Link this to the shared library libeveH5.so</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="eve_8h.html">eve.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span>std;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceeve.html">eve</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> printJoinedData(vector&lt;Data*&gt; jdata){</div><div class="line"></div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> colcnt = jdata.size();</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> valcnt = 0;</div><div class="line">    <span class="keywordflow">if</span> (colcnt &gt; 0) valcnt = jdata[0]-&gt;getDimension().first;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (valcnt == 0){</div><div class="line">       cout &lt;&lt; <span class="stringliteral">&quot;invalid joined data&quot;</span> &lt;&lt; endl;</div><div class="line">       <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line">    vector&lt;void*&gt; dataptr;</div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k=0; k &lt; colcnt; ++k){</div><div class="line">        dataptr.push_back(jdata.at(k)-&gt;getDataPointer());</div><div class="line">    }</div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i &lt; valcnt; ++i){</div><div class="line">        cout &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;\t\t&quot;</span>;</div><div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j=0; j &lt; colcnt; ++j){</div><div class="line">            <span class="keywordtype">void</span>* ptr;</div><div class="line">            <a name="_a0"></a><a class="code" href="classeve_1_1_data.html">Data</a>* joined = jdata.at(j);</div><div class="line">            <span class="keywordflow">if</span> (joined != NULL){                </div><div class="line">                <span class="keywordflow">if</span> (joined-&gt;<a name="a1"></a><a class="code" href="classeve_1_1_data.html#adb6cfcba64a60f1b039b4c683da51dd4">isArrayData</a>()){</div><div class="line">                    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count = joined-&gt;<a name="a2"></a><a class="code" href="classeve_1_1_meta_data.html#a3dc3b199287cb9d8bca5a6311fa8f742">getDimension</a>().second;</div><div class="line">                    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ncount = count;</div><div class="line">                    <span class="keywordflow">if</span> (ncount &gt; 2) ncount = 2;</div><div class="line">                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (joined-&gt;<a name="a3"></a><a class="code" href="classeve_1_1_meta_data.html#a2d763bb034bf323214aa2adb5a31605c">getDataType</a>() == <a name="a4"></a><a class="code" href="namespaceeve.html#af38e49a8d9e1b5b93afba4127080b517a826b60924c0dc05108f0c6a6f16a52a3">DTint32</a>) {</div><div class="line">                        ptr  = joined-&gt;<a name="a5"></a><a class="code" href="classeve_1_1_data.html#a2a8bbf3cddc9b8e37dc972c89dd14a18">getArrayDataPointer</a>(i);</div><div class="line">                        <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                            cout &lt;&lt; <span class="stringliteral">&quot;Null \t\t&quot;</span>;</div><div class="line">                        <span class="keywordflow">else</span> {</div><div class="line">                            vector&lt;int&gt; *vecint = (vector&lt;int&gt;*) ptr;</div><div class="line">                            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k=0; (k &lt; vecint-&gt;size()) &amp;&amp; (k &lt; ncount) ; ++k) cout &lt;&lt; vecint-&gt;at(k) &lt;&lt; <span class="stringliteral">&quot;,&quot;</span>;</div><div class="line">                            <span class="keyword">delete</span> vecint;</div><div class="line">                            cout &lt;&lt; <span class="stringliteral">&quot;... &quot;</span>;</div><div class="line">                        }</div><div class="line">                    }</div><div class="line">                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (joined-&gt;<a class="code" href="classeve_1_1_meta_data.html#a2d763bb034bf323214aa2adb5a31605c">getDataType</a>() == <a name="a6"></a><a class="code" href="namespaceeve.html#af38e49a8d9e1b5b93afba4127080b517a1f05f1a7a4be149e22e57d0a91f606bf">DTfloat64</a>) {</div><div class="line">                        ptr  = joined-&gt;<a class="code" href="classeve_1_1_data.html#a2a8bbf3cddc9b8e37dc972c89dd14a18">getArrayDataPointer</a>(i);</div><div class="line">                        <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                            cout &lt;&lt; <span class="stringliteral">&quot;Null \t\t&quot;</span>;</div><div class="line">                        <span class="keywordflow">else</span> {</div><div class="line">                            vector&lt;double&gt; *vecdbl = (vector&lt;double&gt;*) ptr;</div><div class="line">                            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k=0; (k &lt; vecdbl-&gt;size()) &amp;&amp; (k &lt; ncount) ; ++k) cout &lt;&lt; vecdbl-&gt;at(k) &lt;&lt; <span class="stringliteral">&quot;,&quot;</span>;</div><div class="line">                            <span class="keyword">delete</span> vecdbl;</div><div class="line">                            cout &lt;&lt; <span class="stringliteral">&quot;... &quot;</span>;</div><div class="line">                        }</div><div class="line">                    }</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span> {</div><div class="line">                    ptr = dataptr.at(j);</div><div class="line">                    <span class="keywordflow">if</span> (ptr == NULL)</div><div class="line">                        cout &lt;&lt; <span class="stringliteral">&quot;Null \t\t&quot;</span>;</div><div class="line">                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (joined-&gt;<a class="code" href="classeve_1_1_meta_data.html#a2d763bb034bf323214aa2adb5a31605c">getDataType</a>() == <a class="code" href="namespaceeve.html#af38e49a8d9e1b5b93afba4127080b517a826b60924c0dc05108f0c6a6f16a52a3">DTint32</a>)</div><div class="line">                        cout &lt;&lt; ((vector&lt;int&gt;*)ptr)-&gt;at(i) &lt;&lt; <span class="stringliteral">&quot;\t\t&quot;</span>;</div><div class="line">                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (joined-&gt;<a class="code" href="classeve_1_1_meta_data.html#a2d763bb034bf323214aa2adb5a31605c">getDataType</a>() == <a class="code" href="namespaceeve.html#af38e49a8d9e1b5b93afba4127080b517a1f05f1a7a4be149e22e57d0a91f606bf">DTfloat64</a>)</div><div class="line">                        cout &lt;&lt; ((vector&lt;double&gt;*)ptr)-&gt;at(i) &lt;&lt; <span class="stringliteral">&quot;\t\t&quot;</span>;</div><div class="line">                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (joined-&gt;<a class="code" href="classeve_1_1_meta_data.html#a2d763bb034bf323214aa2adb5a31605c">getDataType</a>() == <a name="a7"></a><a class="code" href="namespaceeve.html#af38e49a8d9e1b5b93afba4127080b517a1ea1f46b7b835b550a6bcdf5ab83ac88">DTstring</a>)</div><div class="line">                        cout &lt;&lt; ((vector&lt;string&gt;*)ptr)-&gt;at(i) &lt;&lt; <span class="stringliteral">&quot;\t\t&quot;</span>;</div><div class="line">                }</div><div class="line">            }</div><div class="line">        }</div><div class="line">        cout &lt;&lt; endl;</div><div class="line">    }</div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k=0; k &lt; colcnt; ++k)  {</div><div class="line">        <span class="keywordflow">if</span> (dataptr.at(k) == NULL)</div><div class="line">            <span class="keywordflow">continue</span>;</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (jdata.at(k)-&gt;getDataType() == <a class="code" href="namespaceeve.html#af38e49a8d9e1b5b93afba4127080b517a826b60924c0dc05108f0c6a6f16a52a3">DTint32</a>)</div><div class="line">            <span class="keyword">delete</span> (vector&lt;int&gt;*)dataptr.at(k);</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (jdata.at(k)-&gt;getDataType() == <a class="code" href="namespaceeve.html#af38e49a8d9e1b5b93afba4127080b517a1f05f1a7a4be149e22e57d0a91f606bf">DTfloat64</a>)</div><div class="line">            <span class="keyword">delete</span> (vector&lt;double&gt;*)dataptr.at(k);</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (jdata.at(k)-&gt;getDataType() == <a class="code" href="namespaceeve.html#af38e49a8d9e1b5b93afba4127080b517a1ea1f46b7b835b550a6bcdf5ab83ac88">DTstring</a>)</div><div class="line">            <span class="keyword">delete</span> (vector&lt;string&gt;*)dataptr.at(k);</div><div class="line">    }</div><div class="line">    dataptr.clear();</div><div class="line">    <span class="keywordflow">for</span> (vector&lt;Data*&gt;::iterator it = jdata.begin(); it != jdata.end(); ++it) <span class="keyword">delete</span> *it;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span> (argc != 2) {</div><div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;usage: &quot;</span> &lt;&lt; argv[0] &lt;&lt; <span class="stringliteral">&quot; &lt;h5-File&gt;&quot;</span> &lt;&lt; endl;</div><div class="line">        <span class="keywordflow">return</span> (1);</div><div class="line">    }</div><div class="line">    <span class="keywordtype">string</span> filename = string(argv[1]);</div><div class="line"></div><div class="line"></div><div class="line">    <a name="_a8"></a><a class="code" href="classeve_1_1_data_file.html">DataFile</a>* h5file = DataFile::openFile(filename);</div><div class="line"></div><div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;\n\n***** File Attributes *****&quot;</span> &lt;&lt; endl;</div><div class="line">    <a name="_a9"></a><a class="code" href="classeve_1_1_file_meta_data.html">FileMetaData</a>* fmd = h5file-&gt;<a name="a10"></a><a class="code" href="classeve_1_1_data_file.html#a2faa657a42c04a623ffceb07bb2d58e0">getFileMetaData</a>();</div><div class="line">    <span class="keywordflow">if</span> (!fmd-&gt;<a name="a11"></a><a class="code" href="classeve_1_1_file_meta_data.html#ac1ab4435a569ee397498264a791cb974">getStartTime</a>().empty())</div><div class="line">        cout &lt;&lt; <span class="stringliteral">&quot; Starttime: &quot;</span> &lt;&lt; fmd-&gt;<a class="code" href="classeve_1_1_file_meta_data.html#ac1ab4435a569ee397498264a791cb974">getStartTime</a>() &lt;&lt; endl;</div><div class="line"></div><div class="line">    vector&lt;MetaData*&gt; metaData = h5file-&gt;<a name="a12"></a><a class="code" href="classeve_1_1_data_file.html#a52dd83b2f5d03f9a5c7e8f7fc6ce2228">getMetaData</a>(<a name="a13"></a><a class="code" href="namespaceeve.html#a0961cf4e088b2a28abf416bc5822a0aba9bcc1797345af22977cd272ee0caf2e1">Standard</a>);</div><div class="line">    vector&lt;MetaData*&gt; tsData = h5file-&gt;<a class="code" href="classeve_1_1_data_file.html#a52dd83b2f5d03f9a5c7e8f7fc6ce2228">getMetaData</a>(<a name="a14"></a><a class="code" href="namespaceeve.html#a0961cf4e088b2a28abf416bc5822a0abad13863511892e35ad67fad2437c1934e">Timestamp</a>);</div><div class="line"></div><div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;\nMetaData (&quot;</span>&lt;&lt; metaData.size()&lt;&lt; <span class="stringliteral">&quot; objects):&quot;</span> &lt;&lt; endl;</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count = 1;</div><div class="line">    <span class="keywordflow">for</span> (vector&lt;MetaData*&gt;::iterator it=metaData.begin(); it!=metaData.end(); ++it){</div><div class="line">        <a name="_a15"></a><a class="code" href="classeve_1_1_meta_data.html">MetaData</a>* dInfo = *it;</div><div class="line">        <span class="keywordflow">if</span> (dInfo-&gt;<a name="a16"></a><a class="code" href="classeve_1_1_meta_data.html#aae991904385c1c6f0f8d83cfab2ed42a">getName</a>().empty()) {</div><div class="line">            <span class="keywordflow">if</span> (dInfo-&gt;<a name="a17"></a><a class="code" href="classeve_1_1_meta_data.html#a07ca703b9c516adbcb45f6bc853009ef">getId</a>().empty()){</div><div class="line">                cout &lt;&lt; count &lt;&lt; <span class="stringliteral">&quot;. ???&quot;</span> &lt;&lt; endl;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">                cout &lt;&lt; count &lt;&lt; <span class="stringliteral">&quot;. xmlid: &quot;</span> &lt;&lt; dInfo-&gt;<a class="code" href="classeve_1_1_meta_data.html#a07ca703b9c516adbcb45f6bc853009ef">getId</a>() &lt;&lt; endl;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            cout &lt;&lt; count &lt;&lt; <span class="stringliteral">&quot;. name: &quot;</span> &lt;&lt; dInfo-&gt;<a class="code" href="classeve_1_1_meta_data.html#aae991904385c1c6f0f8d83cfab2ed42a">getName</a>() &lt;&lt; endl;</div><div class="line">        ++count;</div><div class="line">    }</div><div class="line"></div><div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;\nLogs:\n&quot;</span>;</div><div class="line">    vector&lt;string&gt; logging = h5file-&gt;<a name="a18"></a><a class="code" href="classeve_1_1_data_file.html#ad45389e67a2aa081cec11f1b8ad85c65">getLogData</a>();</div><div class="line">    <span class="keywordflow">for</span> (vector&lt;string&gt;::iterator it=logging.begin(); it!=logging.end(); ++it){</div><div class="line">        cout &lt;&lt; *it &lt;&lt; endl;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> ((metaData.size() &gt; 0) &amp;&amp; (tsData.size() &gt; 0)) {</div><div class="line">        metaData.push_back(tsData.at(0));</div><div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;\nJoined Data (NoFill)\n&quot;</span>;</div><div class="line">        printJoinedData(h5file-&gt;<a name="a19"></a><a class="code" href="classeve_1_1_data_file.html#a77c895ccc325fb6b22d91695f0cac528">getJoinedData</a>(metaData, <a name="a20"></a><a class="code" href="namespaceeve.html#a28a470eb724e4c78137739c8aaf71216a70dd668f0d225b984bad19427efad72d">NoFill</a>));</div><div class="line">    }</div><div class="line">    <span class="keyword">delete</span> h5file;</div><div class="line"></div><div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Cleanup: Metadata\n&quot;</span>;</div><div class="line">    <span class="keywordflow">for</span> (vector&lt;MetaData*&gt;::iterator it = metaData.begin(); it != metaData.end(); ++it){</div><div class="line">        <span class="keyword">delete</span> *it;</div><div class="line">    }</div><div class="line">    metaData.clear();</div><div class="line">    tsData.clear();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div></div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 14 2022 14:48:06 for eve Data Interface by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
